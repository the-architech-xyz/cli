/**
 * Main Emailing Page (Tamagui)
 * 
 * Orchestrates emailing components with i18n support
 */

import React, { useState } from 'react';
import { YStack, XStack, Text, Tabs } from 'tamagui';
import { useTranslation } from '@/lib/i18n';
import { EmailComposer } from '@/components/emailing/EmailComposer';
import { EmailList } from '@/components/emailing/EmailList';
import { TemplateManager } from '@/components/emailing/TemplateManager';
import { 
  Mail, 
  BarChart3, 
  FileText 
} from '@tamagui/lucide-icons';

export function EmailingPage() {
  const { t } = useTranslation();
  const [activeTab, setActiveTab] = useState('compose');

  return (
    <YStack maxWidth={1200} marginHorizontal="auto" padding="$8" gap="$8">
      <YStack>
        <Text fontSize="$7" fontWeight="bold" color="$color">
          {t('email.page.title')}
        </Text>
        <Text fontSize="$4" color="$colorFocus">
          {t('email.page.description')}
        </Text>
      </YStack>

      <Tabs
        value={activeTab}
        onValueChange={setActiveTab}
        orientation="horizontal"
        flexDirection="column"
        borderRadius="$4"
        borderWidth={0}
      >
        <Tabs.List
          backgroundColor="$backgroundHover"
          borderRadius="$4"
          padding="$1"
        >
          <Tabs.Tab
            value="compose"
            flex={1}
            backgroundColor={activeTab === 'compose' ? '$background' : 'transparent'}
            borderRadius="$4"
            padding="$2"
          >
            <XStack gap="$2" alignItems="center" justifyContent="center">
              <Mail size="$1" color="$color" />
              <Text fontSize="$3" color="$color">
                {t('email.page.tabs.compose')}
              </Text>
            </XStack>
          </Tabs.Tab>
          <Tabs.Tab
            value="emails"
            flex={1}
            backgroundColor={activeTab === 'emails' ? '$background' : 'transparent'}
            borderRadius="$4"
            padding="$2"
          >
            <XStack gap="$2" alignItems="center" justifyContent="center">
              <BarChart3 size="$1" color="$color" />
              <Text fontSize="$3" color="$color">
                {t('email.page.tabs.emailList')}
              </Text>
            </XStack>
          </Tabs.Tab>
          <Tabs.Tab
            value="templates"
            flex={1}
            backgroundColor={activeTab === 'templates' ? '$background' : 'transparent'}
            borderRadius="$4"
            padding="$2"
          >
            <XStack gap="$2" alignItems="center" justifyContent="center">
              <FileText size="$1" color="$color" />
              <Text fontSize="$3" color="$color">
                {t('email.page.tabs.templates')}
              </Text>
            </XStack>
          </Tabs.Tab>
        </Tabs.List>

        {/* Compose Tab */}
        {activeTab === 'compose' && (
          <YStack marginTop="$4">
            <EmailComposer />
          </YStack>
        )}

        {/* Email List Tab */}
        {activeTab === 'emails' && (
          <YStack marginTop="$4">
            <EmailList />
          </YStack>
        )}

        {/* Templates Tab */}
        {activeTab === 'templates' && (
          <YStack marginTop="$4">
            <TemplateManager />
          </YStack>
        )}
      </Tabs>
    </YStack>
  );
}

export default EmailingPage;

