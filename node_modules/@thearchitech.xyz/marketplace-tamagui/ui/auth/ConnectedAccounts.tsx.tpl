/**
 * Connected Accounts Component (Tamagui)
 * 
 * Manage connected social accounts with i18n support
 */

import React, { useState } from 'react';
import { YStack, XStack, Card, Text, Button, Badge, Separator } from 'tamagui';
import { useTranslation } from '@/lib/i18n';
import { 
  Github, 
  Google, 
  Apple, 
  Trash2, 
  ExternalLink 
} from '@tamagui/lucide-icons';

export function ConnectedAccounts() {
  const { t, formatDate } = useTranslation();
  
  const [connectedAccounts] = useState([
    {
      id: '1',
      provider: 'Google',
      email: 'user@gmail.com',
      connectedAt: '2024-01-15',
      status: 'active',
      icon: Google
    },
    {
      id: '2',
      provider: 'GitHub',
      username: 'username',
      connectedAt: '2024-01-10',
      status: 'active',
      icon: Github
    }
  ]);

  const handleDisconnect = (accountId: string) => {
    // Handle disconnect logic
    console.log('Disconnect account:', accountId);
  };

  const handleConnect = (provider: string) => {
    // Handle connect logic
    console.log('Connect to:', provider);
  };

  return (
    <YStack gap="$6">
      {/* Header */}
      <YStack>
        <Text fontSize="$7" fontWeight="bold" color="$color">
          {t('accounts.title')}
        </Text>
        <Text fontSize="$4" color="$colorFocus">
          {t('accounts.description')}
        </Text>
      </YStack>

      <YStack gap="$6">
        {/* Connected Accounts */}
        <Card
          theme="base"
          size="$4"
          padding="$0"
          backgroundColor="$background"
          borderWidth={1}
          borderColor="$borderColor"
          borderRadius="$6"
          elevation="$2"
        >
          <YStack padding="$6" paddingBottom="$2">
            <Text fontSize="$5" fontWeight="bold" color="$color">
              {t('accounts.connected.title')}
            </Text>
            <Text fontSize="$3" color="$colorFocus">
              {t('accounts.connected.description')}
            </Text>
          </YStack>
          
          <YStack padding="$6" paddingTop="$0" gap="$4">
            {connectedAccounts.map((account, index) => {
              const IconComponent = account.icon;
              return (
                <YStack key={account.id} gap="$4">
                  <XStack justifyContent="space-between" alignItems="center">
                    <XStack gap="$3" alignItems="center">
                      <IconComponent size="$1" color="$color" />
                      <YStack>
                        <Text fontSize="$4" fontWeight="medium" color="$color">
                          {account.provider}
                        </Text>
                        <Text fontSize="$3" color="$colorFocus">
                          {account.email || account.username}
                        </Text>
                        <Text fontSize="$2" color="$colorFocus">
                          {t('accounts.connected.connectedOn', { 
                            date: formatDate(account.connectedAt) 
                          })}
                        </Text>
                      </YStack>
                    </XStack>
                    
                    <XStack gap="$2" alignItems="center">
                      <Badge
                        backgroundColor={account.status === 'active' ? '$blue10' : '$gray5'}
                        color={account.status === 'active' ? 'white' : '$color'}
                        borderRadius="$4"
                        size="$2"
                      >
                        <Text fontSize="$2" fontWeight="bold">
                          {t(`accounts.status.${account.status}`)}
                        </Text>
                      </Badge>
                      
                      <Button
                        size="$3"
                        backgroundColor="$backgroundHover"
                        color="$color"
                        borderWidth={1}
                        borderColor="$borderColor"
                        borderRadius="$4"
                        onPress={() => handleDisconnect(account.id)}
                      >
                        <Trash2 size="$1" />
                      </Button>
                    </XStack>
                  </XStack>
                  
                  {index < connectedAccounts.length - 1 && (
                    <Separator borderColor="$borderColor" />
                  )}
                </YStack>
              );
            })}
            
            {connectedAccounts.length === 0 && (
              <Text fontSize="$4" color="$colorFocus" textAlign="center" padding="$4">
                {t('accounts.connected.empty')}
              </Text>
            )}
          </YStack>
        </Card>

        {/* Available Providers */}
        <Card
          theme="base"
          size="$4"
          padding="$0"
          backgroundColor="$background"
          borderWidth={1}
          borderColor="$borderColor"
          borderRadius="$6"
          elevation="$2"
        >
          <YStack padding="$6" paddingBottom="$2">
            <Text fontSize="$5" fontWeight="bold" color="$color">
              {t('accounts.connect.title')}
            </Text>
            <Text fontSize="$3" color="$colorFocus">
              {t('accounts.connect.description')}
            </Text>
          </YStack>
          
          <YStack padding="$6" paddingTop="$0" gap="$4">
            {/* Google */}
            <XStack justifyContent="space-between" alignItems="center">
              <XStack gap="$3" alignItems="center">
                <Google size="$1" color="$color" />
                <YStack>
                  <Text fontSize="$4" fontWeight="medium" color="$color">
                    Google
                  </Text>
                  <Text fontSize="$3" color="$colorFocus">
                    {t('accounts.connect.signInWith', { provider: 'Google' })}
                  </Text>
                </YStack>
              </XStack>
              
              <Button
                size="$3"
                backgroundColor="$backgroundHover"
                color="$color"
                borderWidth={1}
                borderColor="$borderColor"
                borderRadius="$4"
                onPress={() => handleConnect('Google')}
              >
                <XStack gap="$1" alignItems="center">
                  <ExternalLink size="$1" />
                  <Text fontSize="$3">
                    {t('accounts.connect.button')}
                  </Text>
                </XStack>
              </Button>
            </XStack>
            
            <Separator borderColor="$borderColor" />
            
            {/* GitHub */}
            <XStack justifyContent="space-between" alignItems="center">
              <XStack gap="$3" alignItems="center">
                <Github size="$1" color="$color" />
                <YStack>
                  <Text fontSize="$4" fontWeight="medium" color="$color">
                    GitHub
                  </Text>
                  <Text fontSize="$3" color="$colorFocus">
                    {t('accounts.connect.signInWith', { provider: 'GitHub' })}
                  </Text>
                </YStack>
              </XStack>
              
              <Button
                size="$3"
                backgroundColor="$backgroundHover"
                color="$color"
                borderWidth={1}
                borderColor="$borderColor"
                borderRadius="$4"
                onPress={() => handleConnect('GitHub')}
              >
                <XStack gap="$1" alignItems="center">
                  <ExternalLink size="$1" />
                  <Text fontSize="$3">
                    {t('accounts.connect.button')}
                  </Text>
                </XStack>
              </Button>
            </XStack>
            
            <Separator borderColor="$borderColor" />
            
            {/* Apple */}
            <XStack justifyContent="space-between" alignItems="center">
              <XStack gap="$3" alignItems="center">
                <Apple size="$1" color="$color" />
                <YStack>
                  <Text fontSize="$4" fontWeight="medium" color="$color">
                    Apple
                  </Text>
                  <Text fontSize="$3" color="$colorFocus">
                    {t('accounts.connect.signInWith', { provider: 'Apple' })}
                  </Text>
                </YStack>
              </XStack>
              
              <Button
                size="$3"
                backgroundColor="$backgroundHover"
                color="$color"
                borderWidth={1}
                borderColor="$borderColor"
                borderRadius="$4"
                onPress={() => handleConnect('Apple')}
              >
                <XStack gap="$1" alignItems="center">
                  <ExternalLink size="$1" />
                  <Text fontSize="$3">
                    {t('accounts.connect.button')}
                  </Text>
                </XStack>
              </Button>
            </XStack>
          </YStack>
        </Card>
      </YStack>
    </YStack>
  );
}

export default ConnectedAccounts;

