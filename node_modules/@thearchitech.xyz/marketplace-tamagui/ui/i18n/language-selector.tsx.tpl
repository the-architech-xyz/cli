/**
 * Language Selector Component (Tamagui)
 * 
 * Button group for switching languages using Tamagui UI
 */

import { XStack, Button, Text } from 'tamagui';
import { useTranslation } from '@/lib/i18n';
import { getLocaleConfig, getSupportedLocales } from '@/lib/i18n';

export function LanguageSelector() {
  const { t, locale, setLocale } = useTranslation();
  const locales = getSupportedLocales();

  return (
    <XStack
      theme="base"
      gap="$2"
      flexWrap="wrap"
    >
      {locales.map((loc) => {
        const config = getLocaleConfig(loc);
        const isActive = locale === loc;
        
        return (
          <Button
            key={loc}
            theme={isActive ? "accent" : "base"}
            size="$4"
            backgroundColor={isActive ? "$backgroundHover" : "$background"}
            color={isActive ? "$colorFocus" : "$color"}
            onPress={() => setLocale(loc)}
            borderWidth={1}
            borderColor={isActive ? "$colorFocus" : "$borderColor"}
            borderRadius="$4"
          >
            <XStack gap="$2" alignItems="center">
              <Text fontSize="$5">{config.flag}</Text>
              <Text fontSize="$4" fontWeight={isActive ? "bold" : "normal"}>
                {config.code.toUpperCase()}
              </Text>
            </XStack>
          </Button>
        );
      })}
    </XStack>
  );
}

export default LanguageSelector;

