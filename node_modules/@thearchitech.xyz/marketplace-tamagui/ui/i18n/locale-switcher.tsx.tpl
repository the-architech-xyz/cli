/**
 * Locale Switcher Component (Tamagui)
 * 
 * Dropdown for switching languages using Tamagui UI
 */

import { YStack, XStack, Button, Text, Sheet, SheetProps } from 'tamagui';
import { useTranslation } from '@/lib/i18n';
import { getLocaleConfig, getSupportedLocales } from '@/lib/i18n';
import { Globe, ChevronDown } from '@tamagui/lucide-icons';

export function LocaleSwitcher() {
  const { t, locale, setLocale } = useTranslation();
  const locales = getSupportedLocales();
  const currentConfig = getLocaleConfig(locale);

  return (
    <YStack
      theme="base"
      gap="$2"
    >
      <Button
        theme="accent"
        size="$4"
        backgroundColor="$background"
        color="$color"
        borderWidth={1}
        borderColor="$borderColor"
        borderRadius="$4"
        icon={Globe}
        iconAfter={ChevronDown}
      >
        <Text fontSize="$4">
          {currentConfig.flag} {currentConfig.nativeName}
        </Text>
      </Button>

      {/* Dropdown menu would be a separate component */}
      <YStack
        theme="base"
        backgroundColor="$background"
        borderWidth={1}
        borderColor="$borderColor"
        borderRadius="$4"
        padding="$2"
        gap="$1"
      >
        {locales.map((loc) => {
          const config = getLocaleConfig(loc);
          const isActive = locale === loc;
          
          return (
            <Button
              key={loc}
              theme={isActive ? "accent" : "base"}
              size="$3"
              backgroundColor={isActive ? "$backgroundHover" : "$background"}
              color={isActive ? "$colorFocus" : "$color"}
              onPress={() => setLocale(loc)}
              borderWidth={isActive ? 2 : 0}
              borderColor="$colorFocus"
              borderRadius="$3"
            >
              <XStack gap="$2">
                <Text>{config.flag}</Text>
                <Text fontSize="$4">{config.nativeName}</Text>
              </XStack>
            </Button>
          );
        })}
      </YStack>
    </YStack>
  );
}

export default LocaleSwitcher;

