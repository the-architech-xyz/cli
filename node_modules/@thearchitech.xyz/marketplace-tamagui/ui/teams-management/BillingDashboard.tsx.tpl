/**
 * Billing Dashboard Component (Tamagui)
 * 
 * Simple billing overview for teams with i18n support
 */

import React from 'react';
import { YStack, XStack, Card, Text, Button, Badge } from 'tamagui';
import { useTeamBilling } from '@/lib/teams/hooks';
import { useTranslation } from '@/lib/i18n';
import { CreditCard, DollarSign } from '@tamagui/lucide-icons';

export function BillingDashboard({ teamId }: { teamId: string }) {
  const { t } = useTranslation();
  const { data: billing, isLoading } = useTeamBilling(teamId);

  if (isLoading) {
    return <Text>{t('billing.loading')}</Text>;
  }

  return (
    <YStack space="$4">
      {/* Current Plan Card */}
      <Card
        theme="base"
        size="$4"
        padding="$0"
        backgroundColor="$background"
        borderWidth={1}
        borderColor="$borderColor"
        borderRadius="$6"
        elevation="$2"
      >
        <YStack padding="$6" gap="$1">
          <Text fontSize="$6" fontWeight="bold" color="$color">
            {t('billing.currentPlan.title')}
          </Text>
          <Text fontSize="$3" color="$colorFocus">
            {t('billing.currentPlan.description')}
          </Text>
        </YStack>
        
        <YStack padding="$6" paddingTop="$0">
          <XStack justifyContent="space-between" alignItems="center">
            <YStack>
              <Text fontSize="$7" fontWeight="bold" color="$color">
                {billing?.planName || t('billing.plan.free')}
              </Text>
              <Text fontSize="$3" color="$colorFocus">
                {t('billing.seats', { count: billing?.seats || 0 })} â€¢ {t(`billing.cycle.${billing?.billingCycle || 'monthly'}`)}
              </Text>
            </YStack>
            
            <Badge
              size="$3"
              backgroundColor={billing?.status === 'active' ? '$blue10' : '$gray5'}
              color={billing?.status === 'active' ? 'white' : '$color'}
              borderRadius="$4"
            >
              {t(`billing.status.${billing?.status || 'inactive'}`)}
            </Badge>
          </XStack>
        </YStack>
      </Card>

      {/* Current Usage Card */}
      <Card
        theme="base"
        size="$4"
        padding="$0"
        backgroundColor="$background"
        borderWidth={1}
        borderColor="$borderColor"
        borderRadius="$6"
        elevation="$2"
      >
        <YStack padding="$6" paddingBottom="$2">
          <XStack justifyContent="space-between" alignItems="center">
            <Text fontSize="$4" fontWeight="bold" color="$color">
              {t('billing.currentUsage.title')}
            </Text>
            <DollarSign size="$1" color="$colorFocus" />
          </XStack>
        </YStack>
        
        <YStack padding="$6" paddingTop="$0">
          <Text fontSize="$7" fontWeight="bold" color="$color">
            ${billing?.currentUsage?.toFixed(2) || '0.00'}
          </Text>
          <Text fontSize="$2" color="$colorFocus">
            {t('billing.currentUsage.period')}
          </Text>
        </YStack>
      </Card>

      {/* Payment Method Card */}
      <Card
        theme="base"
        size="$4"
        padding="$0"
        backgroundColor="$background"
        borderWidth={1}
        borderColor="$borderColor"
        borderRadius="$6"
        elevation="$2"
      >
        <YStack padding="$6" gap="$1">
          <Text fontSize="$6" fontWeight="bold" color="$color">
            {t('billing.paymentMethod.title')}
          </Text>
          <Text fontSize="$3" color="$colorFocus">
            {t('billing.paymentMethod.description')}
          </Text>
        </YStack>
        
        <YStack padding="$6" paddingTop="$0">
          <XStack justifyContent="space-between" alignItems="center">
            <XStack gap="$2" alignItems="center">
              <CreditCard size="$1" color="$color" />
              <Text fontSize="$4" color="$color">
                {billing?.paymentMethod || t('billing.paymentMethod.none')}
              </Text>
            </XStack>
            
            <Button
              size="$3"
              backgroundColor="$backgroundHover"
              color="$color"
              borderWidth={1}
              borderColor="$borderColor"
              borderRadius="$4"
            >
              {t('billing.paymentMethod.update')}
            </Button>
          </XStack>
        </YStack>
      </Card>
    </YStack>
  );
}

export default BillingDashboard;

