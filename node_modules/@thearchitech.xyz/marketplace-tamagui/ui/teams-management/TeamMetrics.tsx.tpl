/**
 * Team Metrics Component
 * 
 * Simple team metrics and statistics display
 */

'use client';

import React from 'react';
import { useTranslation } from '@/lib/i18n';
import { useTeamStats } from '@/lib/teams/hooks';
import { 
  YStack, 
  XStack, 
  Card, 
  CardContent, 
  CardHeader, 
  CardTitle,
  Text,
  Spinner
} from 'tamagui';
import { Users, FileText, Activity } from 'lucide-react-native';

export function TeamMetrics({ teamId }: { teamId: string }) {
  const { t } = useTranslation();
  const { data: stats, isLoading } = useTeamStats(teamId);

  if (isLoading) {
    return (
      <YStack alignItems="center" padding="$4">
        <Spinner size="large" />
        <Text marginTop="$2">{t('teams.loadingMetrics')}</Text>
      </YStack>
    );
  }

  return (
    <XStack flexWrap="wrap" gap="$4">
      <Card flex={1} minWidth={200} elevate>
        <CardHeader paddingBottom="$2">
          <XStack justifyContent="space-between" alignItems="center">
            <CardTitle>{t('teams.metrics.members')}</CardTitle>
            <Users size={16} color="$gray10" />
          </XStack>
        </CardHeader>
        <CardContent>
          <Text fontSize="$6" fontWeight="bold">{stats?.memberCount || 0}</Text>
          <Text fontSize="$1" color="$gray10">
            {t('teams.metrics.activeMembers')}
          </Text>
        </CardContent>
      </Card>

      <Card flex={1} minWidth={200} elevate>
        <CardHeader paddingBottom="$2">
          <XStack justifyContent="space-between" alignItems="center">
            <CardTitle>{t('teams.metrics.projects')}</CardTitle>
            <FileText size={16} color="$gray10" />
          </XStack>
        </CardHeader>
        <CardContent>
          <Text fontSize="$6" fontWeight="bold">{stats?.projectCount || 0}</Text>
          <Text fontSize="$1" color="$gray10">
            {t('teams.metrics.activeProjects')}
          </Text>
        </CardContent>
      </Card>

      <Card flex={1} minWidth={200} elevate>
        <CardHeader paddingBottom="$2">
          <XStack justifyContent="space-between" alignItems="center">
            <CardTitle>{t('teams.metrics.activity')}</CardTitle>
            <Activity size={16} color="$gray10" />
          </XStack>
        </CardHeader>
        <CardContent>
          <Text fontSize="$6" fontWeight="bold">{stats?.activityScore || 0}%</Text>
          <Text fontSize="$1" color="$gray10">
            {t('teams.metrics.activityScore')}
          </Text>
        </CardContent>
      </Card>
    </XStack>
  );
}
